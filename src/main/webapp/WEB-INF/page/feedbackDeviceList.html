<!DOCTYPE html>
<html lang="zh-cn">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<meta name="renderer" content="webkit">
<title></title>
<link rel="stylesheet" href="css/pintuer.css">
<link rel="stylesheet" href="css/admin.css">
<script src="js/jquery.js"></script>
<script src="js/pintuer.js"></script>
</head>
<body>
<form method="post" action="" id="listform">
  	<div class="panel admin-panel">
    <div class="panel-head"><strong class="icon-reorder">报修列表</strong></div>
    <table class="table table-hover text-center">
      <tr>
        <th>设备编号</th>
        <th>设备名称</th>
        <th>问题简述</th>
        <th>报修时间</th>
        <th>状态</th>
        <th>操作</th>
      </tr>
      
      <tbody data-th-each="model : ${questions}">
        <tr>  
          <td data-th-text="${model.number}"></td>
          <td>
          	<font data-th-text="${model.name}"></font>
          </td>
          <td data-th-text="${model.question}"></td>
          <td data-th-text="${model.insert_time}"></td>
          <td data-th-if="${model.status == -1}" >待处理</td>
          <td data-th-if="${model.status == 1}" >已处理</td>
          <td data-th-if="${model.status == 0}" >暂不处理</td>
          <td>
          	<div class="button-group" data-th-if="${model.status == -1}" >
          		<input type="hidden" data-th-value="${model.id}"/>
          		<a class="button border-blue" onclick="enQuestion(this)" style="padding: 4px 8px;">立即维修</a>
          		<a class="button border-red" onclick="unQuestion(this)" style="padding: 4px 8px;">暂不处理</a>
          	</div>
          </td>
        </tr>
       </tbody>
    </table>
  </div>
</form>
<script>
	function enQuestion(e){
		var id = $($($(e).parent()[0]).children()[0]).val();
			 $.ajax({
	             type: "GET",
	             url: "/wskjglxt/enQuestion",
	             data: {
	            	 id:id
	            	 },
	             dataType: "json",
	             success: 
	            	 function(e){
	            	 	window.location.reload();
	                  }
	         }); 
	}
	
	function unQuestion(e){
		var id = $($($(e).parent()[0]).children()[0]).val();
			 $.ajax({
	             type: "GET",
	             url: "/wskjglxt/unQuestion",
	             data: {
	            	 id:id
	            	 },
	             dataType: "json",
	             success: 
	            	 function(e){
	            	 	window.location.reload();
	                  }
	         }); 
	}
</script>
</body>
</html>
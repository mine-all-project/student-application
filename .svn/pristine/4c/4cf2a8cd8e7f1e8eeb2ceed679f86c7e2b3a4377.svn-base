<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> 
	<meta http-equiv="Pragma" content="no-cache"> 
	<meta http-equiv="Cache-Control" content="no-cache"> 
	<meta http-equiv="Expires" content="0"> 
<title>务实科技管理系统</title> 
<link href="login/css/login.css" type="text/css" rel="stylesheet"> 
<script src="js/jquery.js"></script>
</head> 
<body> 
<div class="login">
    <div class="message">务实科技管理系统</div>
    <div id="darkbannerwrap"></div>
    <form method="post" action="addReg">
		<input name="action" value="login" type="hidden">
		<input name="phone" placeholder="手机号" required="required" type="text" id="phone">
		<hr class="hr15">
		<input name="code" placeholder="验证码" required="required" type="text" id="code">
		<hr class="hr15">
		<input name="username" placeholder="用户名" required="required" type="text">
		<hr class="hr15">
		<input value="获取验证码" style="width:100%;" onclick="getCode();" type="button"/>
		<hr class="hr15">
		<input value="立即注册" style="width:100%;" onclick="check();" type="button" >
		<input  style="display:none;" type="submit" id="sub">
		<hr class="hr20">
	</form>
</div>
</body>
<script>
	var code = '';
	var flag = false;
	function getCode(){
		var phone = $('#phone').val();
		if(phone.length!=11){
			alert('请输入正确的手机号');
		}else{
			$.get("/wskjglxt/getCode?phone="+phone,function(e){
				code = e;
			})
		}
	};
	
	function check(){
		if(flag){
			$('#sub').click();
		}else{
			return;
		}
	};
	
</script>
<script>
	$(function(){
		$('#code').change(function () {
			if($('#code').val()!=code){
				alert('验证码错误');
				flag = false;
				return;
			}
		});
		flag = true;
	})
</script>
</html>
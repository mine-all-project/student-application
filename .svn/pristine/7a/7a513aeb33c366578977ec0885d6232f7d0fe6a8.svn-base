<!DOCTYPE html>
<html lang="zh-cn">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<meta name="renderer" content="webkit">
<title></title>
<link rel="stylesheet" href="css/pintuer.css">
<link rel="stylesheet" href="css/admin.css">
<script src="js/jquery.js"></script>
<script src="js/pintuer.js"></script>
</head>
<body>
<form method="post" action="" id="listform">
    <div class="panel-head"><strong class="icon-reorder">请假列表</strong></div>
    <table class="table table-hover text-center">
      <tr>
        <th>工号</th>
        <th>姓名</th>
        <th>请假时间</th>
        <th>开始时间</th>
        <th>请假原因</th>
        <th>状态</th>
      </tr>
      
      <tbody data-th-each="model : ${frees}">
        <tr>  
          <td data-th-text="${model.number}"></td>
          <td>
          	<font data-th-text="${model.name}"></font>
          </td>
          <td data-th-text="${model.time}"></td>
          <td data-th-text="${model.start}"></td>
          <td data-th-text="${model.info}"></td>
          <td>
          	<div class="button-group" >
          		<input type="hidden" data-th-value="${model.id}">
          		<a data-th-if="${model.status == -1}" class="button border-green" onclick="updateFree(this,1);" style="padding: 4px 8px;">同意</a>
          		<a data-th-if="${model.status == -1}" class="button border-red" onclick="updateFree(this,1);" style="padding: 4px 8px;">拒绝</a>
          		<span data-th-if="${model.status == 1}" style="padding: 4px 8px;">已同意</span>
          		<span data-th-if="${model.status == 0}" style="padding: 4px 8px;">已拒绝</span>
          	</div>
        </tr>
       </tbody>
    </table>
</form>
<script>
	function updateFree(e,flag){
		var id = $($($(e).parent()[0]).children()[0]).val();
			 $.ajax({
	             type: "GET",
	             url: "/wskjglxt/updateFree",
	             data: {
	            	 id:id,
	            	 flag:flag
	            	 },
	             dataType: "json",
	             success: 
	            	 function(e){
	            	 	window.location.reload();
	                  }
	         }); 
	}
</script>
</body>
</html>